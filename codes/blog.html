
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Blog – Dev Updates</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
<header class="site-header">
    <div class="nav-inner">
        <div class="logo"><span class="logo-text">YOUR GAME</span></div>
        <nav class="main-nav">
  <a href="index.html#home" class="nav-link">Home</a>
  <a href="blog.html" class="nav-link active">Blog</a>
  <a href="index.html#media" class="nav-link">Media</a>
  <a href="index.html#wiki" class="nav-link">Wiki</a>
  <a href="index.html#faq" class="nav-link">FAQ</a>
  <a href="index.html#buy" class="nav-link cta-link">Buy / Wishlist</a>
</nav>

    </div>
</header>

<main class="section" style="padding-top:90px;">
    <h1>Devlog & News</h1>
    <p>All development updates in one place.</p>

    <div class="cards-grid">
        <article class="card">
            <h3>What happened to Skylanders?</h3>
            <p>The life and death of a seemingly invincible game franchise.</p>
            <a class="card-link" href="posts/devlog-01.html">Read →</a>
        </article>

        <article class="card">
            <h3>Main cast Concept Art</h3>
            <p>Early style moddeling and lore</p>
            <a class="card-link" href="posts/devlog-02.html">Read →</a>
        </article>
    </div>
</main>
<!-- LIGHTBOX WIDGET (paste once per page) -->
<div class="lightbox-overlay" id="lightboxOverlay" aria-hidden="true">
  <div class="lightbox-modal" id="lightboxModal" role="dialog" aria-modal="true" aria-label="Image viewer">
    <div class="lightbox-topbar">
      <p class="lightbox-title" id="lightboxTitle">Artwork</p>
      <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close">✕</button>
    </div>

    <div class="lightbox-body">
      <img class="lightbox-img" id="lightboxImg" alt="" />
    </div>

    <div class="lightbox-footer">
      <p class="lightbox-caption" id="lightboxCaption"></p>
      <button class="lightbox-fullscreen" id="lightboxFullscreen" type="button" aria-label="Fullscreen">⛶</button>
    </div>
  </div>
</div>
<script>
(() => {
  const overlay = document.getElementById("lightboxOverlay");
  const modal = document.getElementById("lightboxModal");
  const img = document.getElementById("lightboxImg");
  const titleEl = document.getElementById("lightboxTitle");
  const capEl = document.getElementById("lightboxCaption");
  const btnClose = document.getElementById("lightboxClose");
  const btnFS = document.getElementById("lightboxFullscreen");

  if (!overlay || !modal || !img) return;

  let lastFocus = null;

  function openLightbox({ src, title = "", caption = "", alt = "" }) {
    if (!src) return;

    lastFocus = document.activeElement;

    img.src = src;
    img.alt = alt || title || "Image";

    titleEl.textContent = title || "Artwork";
    capEl.textContent = caption || "";

    overlay.classList.add("open");
    overlay.setAttribute("aria-hidden", "false");
    document.body.classList.add("no-scroll");

    btnClose && btnClose.focus();
  }

  function closeLightbox() {
    overlay.classList.remove("open");
    overlay.classList.remove("soft-fullscreen");
    overlay.setAttribute("aria-hidden", "true");
    document.body.classList.remove("no-scroll");

    img.removeAttribute("src");

    if (document.fullscreenElement) {
      document.exitFullscreen().catch(() => {});
    }

    if (lastFocus && typeof lastFocus.focus === "function") lastFocus.focus();
  }

  // Close button
  btnClose && btnClose.addEventListener("click", closeLightbox);

  // Click outside modal closes
  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeLightbox();
  });

  // ESC closes
  document.addEventListener("keydown", (e) => {
    if (!overlay.classList.contains("open")) return;
    if (e.key === "Escape") closeLightbox();
  });

  // Fullscreen toggle (try real fullscreen, fallback to CSS "soft fullscreen")
  btnFS && btnFS.addEventListener("click", async () => {
    if (!overlay.classList.contains("open")) return;

    try {
      if (!document.fullscreenElement) {
        await modal.requestFullscreen();
      } else {
        await document.exitFullscreen();
      }
    } catch (err) {
      overlay.classList.toggle("soft-fullscreen");
    }
  });

  document.addEventListener("fullscreenchange", () => {
    if (!document.fullscreenElement) {
      overlay.classList.remove("soft-fullscreen");
    }
  });

  /* ===========================
     ATTACH TO YOUR SITE
     =========================== */

  // A) Gallery page: <a class="gallery-item" href="images/...">
  document.querySelectorAll("a.gallery-item[href]").forEach((a) => {
    a.addEventListener("click", (e) => {
      const href = a.getAttribute("href") || "";
      const looksLikeImage = /\.(png|jpg|jpeg|gif|webp|svg)$/i.test(href) || href.includes("images/");
      if (!looksLikeImage) return;

      e.preventDefault();

      const t = a.querySelector(".cap-title")?.textContent?.trim() || a.getAttribute("data-title") || "";
      const sub = a.querySelector(".cap-sub")?.textContent?.trim() || a.getAttribute("data-caption") || "";
      openLightbox({ src: href, title: t, caption: sub, alt: t });
    });
  });

  // B) Homepage media grid: any <img> inside .media-item
  document.querySelectorAll(".media-item img").forEach((image) => {
    image.style.cursor = "zoom-in";
    image.addEventListener("click", () => {
      const src = image.getAttribute("src");
      const alt = image.getAttribute("alt") || "";
      const title = image.getAttribute("data-title") || alt || "Media";
      const caption = image.getAttribute("data-caption") || "";
      openLightbox({ src, title, caption, alt });
    });
  });

  // C) Blog posts: any image inside .blog-post OR inside <main>
  const blogScope = document.querySelector(".blog-post") || document.querySelector("main") || document.body;

  blogScope.querySelectorAll("img").forEach((image) => {
    if (image.closest(".site-header")) return;

    image.style.cursor = "zoom-in";
    image.addEventListener("click", () => {
      const src = image.getAttribute("src");
      if (!src) return;
      const alt = image.getAttribute("alt") || "";
      const title = image.getAttribute("data-title") || alt || "Image";
      const caption = image.getAttribute("data-caption") || "";
      openLightbox({ src, title, caption, alt });
    });
  });
})();
</script>

</body>
</html>

