
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gallery – YOUR GAME TITLE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <!-- NAV (same look as homepage) -->
  <header class="site-header">
    <div class="nav-inner">
      <div class="logo">
        <span class="logo-text">YOUR GAME TITLE</span>
      </div>

      <nav class="main-nav">
        <a href="index.html#home" class="nav-link">Home</a>
        <a href="blog.html" class="nav-link">Blog</a>
        <a href="index.html#media" class="nav-link active">Media</a>
        <a href="index.html#wiki" class="nav-link">Wiki</a>
        <a href="index.html#faq" class="nav-link">FAQ</a>
        <a href="index.html#buy" class="nav-link cta-link">Buy / Wishlist</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="section" style="padding-top: 90px;">
      <div class="section-header">
        <h1>Full Gallery</h1>
        <p>All screenshots, GIFs, concept art, 3D renders, and progress images.</p>
      </div>

     <div class="gallery-toolbar">
  <div class="filter-bar" aria-label="Sort by media type">
    <span class="filter-label">Sort by:</span>

    <button class="filter-btn" type="button" data-filter="painting">Painting</button>
    <button class="filter-btn" type="button" data-filter="sketch">Sketch</button>
    <button class="filter-btn" type="button" data-filter="sculpture">Sculpture</button>
    <button class="filter-btn" type="button" data-filter="digital">Digital</button>
    <button class="filter-btn" type="button" data-filter="animation">Animation</button>
    <button class="filter-btn" type="button" data-filter="3d">3D</button>

    <button class="filter-clear" type="button" id="filterClear">Clear</button>
  </div>

  <span class="gallery-hint" id="filterHint">Click multiple tags to filter.</span>
</div>


      <!-- GALLERY GRID -->
      <div class="gallery-grid">

        <!-- ITEM 1 (placeholder) -->
     <a class="gallery-item" href="images/OG JICIMI car scene colored.PNG" data-tags="digital">
  <div class="gallery-thumb">
    <img src="images/OG JICIMI car scene colored.PNG" alt="William’s Car">
  </div>
  <div class="gallery-caption">
    <div class="cap-title">Just in case I make it</div>
    <div class="cap-sub">First fully rendered thumbnail art of webtoon series ‘In case I make it’</div>
  </div>
</a>


        <!-- ITEM 2 (Golden Freddy) -->
        <!-- If your filename has spaces, use %20 for safety -->
       <a class="gallery-item" href="images/Golden%20freddy%20art.jpeg" data-tags="painting">

          <div class="gallery-thumb">
            <img src="images/Golden%20freddy%20art.jpeg" alt="Golden Freddy">
          </div>
          <div class="gallery-caption">
            <div class="cap-title">Golden Freddy</div>
            <div class="cap-sub">IT'S ME. Acrylic painting on a piece of scrap cardboard.</div>
          </div>
        </a>



<a class="gallery-item" href="images/Space%20cats.jpg" data-tags="digital">
  <div class="gallery-thumb">
    <img src="images/Space%20cats.jpg" alt="Space Cats">
  </div>
  <div class="gallery-caption">
    <div class="cap-title">Space Cats</div>
    <div class="cap-sub">Digital art of Warrior Cats OC's</div>
  </div>
</a>

        
<!-- test-->



        

    
       

        <!-- ITEM 4 (placeholder) -->

        <a class="gallery-item" href="images/Barnaby chill.PNG" data-tags="digital">
  <div class="gallery-thumb">
    <img src="images/Barnaby chill.PNG" alt="Barnaby">
  </div>
  <div class="gallery-caption">
    <div class="cap-title">Barnaby</div>
    <div class="cap-sub">Barnaby Rendered art</div>
  </div>
</a>

        <a class="gallery-item" href="images/Barnaby%20chill.PNG" data-tags="sketch">
          <div class="gallery-thumb">
            <span class="media-placeholder">Concept Art 1</span>
          </div>
          <div class="gallery-caption">
            <div class="cap-title">Concept Art</div>
            <div class="cap-sub">Character sketch</div>
          </div>
        </a>

        <!-- ITEM 5 (placeholder) -->
        <a class="gallery-item" href="images/render-1.png">
          <div class="gallery-thumb">
            <span class="media-placeholder">3D Render 1</span>
          </div>
          <div class="gallery-caption">
            <div class="cap-title">3D Render</div>
            <div class="cap-sub">Model progress</div>
          </div>
        </a>

      </div>

      <div class="section-footer">
        <a href="index.html#media" class="text-link">← Back to Media section</a>
      </div>
    </section>
  </main>

  <!-- LIGHTBOX WIDGET (paste once per page) -->
  <div class="lightbox-overlay" id="lightboxOverlay" aria-hidden="true">
    <div class="lightbox-modal" id="lightboxModal" role="dialog" aria-modal="true" aria-label="Image viewer">
      <div class="lightbox-topbar">
  <div class="lightbox-head">
    <p class="lightbox-title" id="lightboxTitle">Artwork</p>
    <div class="lightbox-tags" id="lightboxTags" aria-label="Tags"></div>
  </div>

<div class="lightbox-actions">
  <button class="lightbox-close" id="lightboxClose" type="button" aria-label="Close">✕</button>
</div>

</div>

<div class="lightbox-body">
  <div class="lightbox-feed" id="lightboxFeed" aria-label="Artwork feed"></div>
</div>


<div class="lightbox-footer">
  <p class="lightbox-caption" id="lightboxCaption"></p>
  <button class="lightbox-fullscreen" id="lightboxFullscreen" type="button" aria-label="Fullscreen">⛶</button>
</div>

    </div>
  </div>


   <script>
(() => {
  // ===========================
  // LIGHTBOX + TAGS
  // ===========================
  const overlay = document.getElementById("lightboxOverlay");
  const modal = document.getElementById("lightboxModal");
 const feed = document.getElementById("lightboxFeed");
  const titleEl = document.getElementById("lightboxTitle");
  const capEl = document.getElementById("lightboxCaption");
  const tagsEl = document.getElementById("lightboxTags");
  const btnClose = document.getElementById("lightboxClose");
  const btnFS = document.getElementById("lightboxFullscreen");

if (!overlay || !modal || !feed) return;


  let lastFocus = null;

  function renderTags(tags) {
    if (!tagsEl) return;

    const list = (tags || "")
      .toLowerCase()
      .split(",")
      .map(t => t.trim())
      .filter(Boolean);

    tagsEl.innerHTML = list.map(t => `<span class="lightbox-tag">${t}</span>`).join("");
  }

  function openLightbox({ src, title = "", caption = "", alt = "", tags = "" }) {
    if (!src) return;

    lastFocus = document.activeElement;

    img.src = src;
    img.alt = alt || title || "Image";

    if (titleEl) titleEl.textContent = title || "Artwork";
    if (capEl) capEl.textContent = caption || "";
    renderTags(tags);
    function isVideoFile(src){
  return /\.(mp4|webm|mov|m4v|ogg)$/i.test(src);
}

function escapeHTML(str=""){
  return str.replace(/[&<>"']/g, (m) => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));
}


    // IMPORTANT: open as normal modal first (NOT fullscreen)
    overlay.classList.remove("soft-fullscreen");
    overlay.classList.add("open");
    overlay.setAttribute("aria-hidden", "false");
    document.body.classList.add("no-scroll");

    btnClose && btnClose.focus();
  }

  function closeLightbox() {
    overlay.classList.remove("open");
    overlay.classList.remove("soft-fullscreen");
    overlay.setAttribute("aria-hidden", "true");
    document.body.classList.remove("no-scroll");

    feed.innerHTML = "";

    if (tagsEl) tagsEl.innerHTML = "";

    if (document.fullscreenElement) {
      document.exitFullscreen().catch(() => {});
    }

    if (lastFocus && typeof lastFocus.focus === "function") lastFocus.focus();
  }

  btnClose && btnClose.addEventListener("click", closeLightbox);

  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeLightbox();
  });

  document.addEventListener("keydown", (e) => {
    if (!overlay.classList.contains("open")) return;
    if (e.key === "Escape") closeLightbox();
  });

  // Fullscreen toggle
  btnFS && btnFS.addEventListener("click", async () => {
    if (!overlay.classList.contains("open")) return;

    try {
      if (!document.fullscreenElement) {
        await modal.requestFullscreen();
      } else {
        await document.exitFullscreen();
      }
    } catch (err) {
      // Fallback if fullscreen blocked
      overlay.classList.toggle("soft-fullscreen");
    }
  });

  document.addEventListener("fullscreenchange", () => {
    // When exiting real fullscreen, ensure fallback class is off
    if (!document.fullscreenElement) {
      overlay.classList.remove("soft-fullscreen");
    }
  });
  function updateHeaderFromNearest(){
  // find the slide nearest to the center of the feed viewport
  const slides = Array.from(feed.querySelectorAll(".lightbox-slide"));
  if (slides.length === 0) return;

  const box = feed.getBoundingClientRect();
  const centerY = box.top + box.height / 2;

  let best = null;
  let bestDist = Infinity;

  for (const s of slides){
    const r = s.getBoundingClientRect();
    const sCenter = r.top + r.height / 2;
    const d = Math.abs(sCenter - centerY);
    if (d < bestDist){
      bestDist = d;
      best = s;
    }
  }

  if (!best) return;

  const t = best.getAttribute("data-title") || "Artwork";
  const c = best.getAttribute("data-caption") || "";
  const tags = best.getAttribute("data-tags") || "";

  if (titleEl) titleEl.textContent = t || "Artwork";
  if (capEl) capEl.textContent = c || "";
  renderTags(tags);
}

// update header while scrolling (throttled)
let feedTick = false;
feed.addEventListener("scroll", () => {
  if (!overlay.classList.contains("open")) return;
  if (feedTick) return;
  feedTick = true;
  requestAnimationFrame(() => {
    feedTick = false;
    updateHeaderFromNearest();
  });
});


   // ===========================
  // SCROLL THROUGH ARTWORKS (prev/next)
  // ===========================

  const allAnchors = Array.from(document.querySelectorAll("a.gallery-item[href]"));

  function looksLikeImageHref(href) {
    return (
      /\.(png|jpg|jpeg|gif|webp|svg)$/i.test(href) ||
      href.includes("images/")
    );
  }

  function getAnchorData(a) {
    const href = a.getAttribute("href") || "";
    const t =
      a.querySelector(".cap-title")?.textContent?.trim() ||
      a.getAttribute("data-title") ||
      "";
    const sub =
      a.querySelector(".cap-sub")?.textContent?.trim() ||
      a.getAttribute("data-caption") ||
      "";
    const tags = a.getAttribute("data-tags") || "";
    return { href, title: t, caption: sub, tags };
  }

  // Build the "scrollable" list from currently-visible (not filtered out) items
  let scrollList = [];
  let currentIndex = -1;

  function rebuildScrollList() {
    scrollList = allAnchors.filter((a) => {
      const href = a.getAttribute("href") || "";
      if (!looksLikeImageHref(href)) return false;
      if (a.classList.contains("is-hidden")) return false;
      return true;
    });
  }

  function openFromIndex(idx) {
    rebuildScrollList();
    if (scrollList.length === 0) return;

    // clamp
    if (idx < 0) idx = 0;
    if (idx > scrollList.length - 1) idx = scrollList.length - 1;

    currentIndex = idx;

    const a = scrollList[currentIndex];
    const { href, title, caption, tags } = getAnchorData(a);

   function openLightbox({ startIndex = 0 } = {}) {
  lastFocus = document.activeElement;

  // build list of currently visible items (respects filters)
  const items = Array.from(document.querySelectorAll("a.gallery-item[href]"))
    .filter(a => !a.classList.contains("is-hidden"))
    .filter(a => {
      const href = a.getAttribute("href") || "";
      return /\.(png|jpg|jpeg|gif|webp|svg|mp4|webm|mov|m4v|ogg)$/i.test(href) || href.includes("images/");
    });

  if (items.length === 0) return;

  // Build feed slides
  feed.innerHTML = items.map((a, i) => {
    const href = a.getAttribute("href") || "";
    const t =
      a.querySelector(".cap-title")?.textContent?.trim() ||
      a.getAttribute("data-title") || "";
    const sub =
      a.querySelector(".cap-sub")?.textContent?.trim() ||
      a.getAttribute("data-caption") || "";
    const tags = a.getAttribute("data-tags") || "";

    const media = isVideoFile(href)
      ? `<video class="lb-media" src="${escapeHTML(href)}" playsinline muted loop preload="metadata"></video>`
      : `<img class="lb-media" src="${escapeHTML(href)}" alt="${escapeHTML(t || "Artwork")}" loading="eager">`;

    return `
      <section class="lightbox-slide" data-index="${i}" data-title="${escapeHTML(t)}" data-caption="${escapeHTML(sub)}" data-tags="${escapeHTML(tags)}">
        <div class="lightbox-frame">${media}</div>
        <div class="lightbox-meta">
          <p class="meta-title">${escapeHTML(t || "Artwork")}</p>
          <p class="meta-desc">${escapeHTML(sub || "")}</p>
        </div>
      </section>
    `;
  }).join("");

  // open overlay
  overlay.classList.remove("soft-fullscreen");
  overlay.classList.add("open");
  overlay.setAttribute("aria-hidden", "false");
  document.body.classList.add("no-scroll");

  // jump to the clicked slide
  const clamped = Math.max(0, Math.min(startIndex, items.length - 1));
  requestAnimationFrame(() => {
    const target = feed.querySelector(`.lightbox-slide[data-index="${clamped}"]`);
    if (target) target.scrollIntoView({ block: "center" });
    updateHeaderFromNearest(); // set title/tags at top
  });
let vidObserver = null;

function setupVideoObserver(){
  if (vidObserver) vidObserver.disconnect();

  const videos = Array.from(feed.querySelectorAll("video.lb-media"));
  if (videos.length === 0) return;

  vidObserver = new IntersectionObserver((entries) => {
    for (const e of entries){
      const v = e.target;
      if (e.isIntersecting && e.intersectionRatio > 0.65){
        v.play().catch(()=>{});
      } else {
        v.pause();
      }
    }
  }, { root: feed, threshold: [0.65] });

  videos.forEach(v => vidObserver.observe(v));
}

  btnClose && btnClose.focus();

  // ---- video auto-play on the current slide ----
  setupVideoObserver();
}


  function openFromAnchor(a) {
    rebuildScrollList();
    const idx = scrollList.indexOf(a);
    currentIndex = idx >= 0 ? idx : 0;

    const { href, title, caption, tags } = getAnchorData(a);
    openLightbox({ src: href, title, caption, alt: title, tags });
  }

  function goNext() {
    if (!overlay.classList.contains("open")) return;
    rebuildScrollList();
    if (scrollList.length === 0) return;

    const next = Math.min(currentIndex + 1, scrollList.length - 1);
    if (next === currentIndex) return;
    openFromIndex(next);
  }

  function goPrev() {
    if (!overlay.classList.contains("open")) return;
    rebuildScrollList();
    if (scrollList.length === 0) return;

    const prev = Math.max(currentIndex - 1, 0);
    if (prev === currentIndex) return;
    openFromIndex(prev);
  }

document.querySelectorAll("a.gallery-item[href]").forEach((a) => {
  a.addEventListener("click", (e) => {
    const href = a.getAttribute("href") || "";
    const ok = /\.(png|jpg|jpeg|gif|webp|svg|mp4|webm|mov|m4v|ogg)$/i.test(href) || href.includes("images/");
    if (!ok) return;

    e.preventDefault();

    // build the same visible list to find index
    const visible = Array.from(document.querySelectorAll("a.gallery-item[href]"))
      .filter(x => !x.classList.contains("is-hidden"))
      .filter(x => {
        const h = x.getAttribute("href") || "";
        return /\.(png|jpg|jpeg|gif|webp|svg|mp4|webm|mov|m4v|ogg)$/i.test(h) || h.includes("images/");
      });

    const idx = visible.indexOf(a);
    openLightbox({ startIndex: Math.max(0, idx) });
  });
});


  // Wheel / trackpad scroll -> next/prev (debounced)
  let wheelLock = false;
  function wheelStep(deltaY) {
    if (wheelLock) return;
    wheelLock = true;
    setTimeout(() => (wheelLock = false), 240);

    if (deltaY > 0) goNext();
    if (deltaY < 0) goPrev();
  }

  overlay.addEventListener(
    "wheel",
    (e) => {
      if (!overlay.classList.contains("open")) return;
      e.preventDefault();
      wheelStep(e.deltaY);
    },
    { passive: false }
  );

  // Keyboard navigation
  document.addEventListener("keydown", (e) => {
    if (!overlay.classList.contains("open")) return;

    if (e.key === "ArrowDown" || e.key === "PageDown") {
      e.preventDefault();
      goNext();
    }
    if (e.key === "ArrowUp" || e.key === "PageUp") {
      e.preventDefault();
      goPrev();
    }
  });

  // Touch swipe (mobile): swipe up = next, swipe down = prev
  let touchStartY = null;

  overlay.addEventListener(
    "touchstart",
    (e) => {
      if (!overlay.classList.contains("open")) return;
      touchStartY = e.touches?.[0]?.clientY ?? null;
    },
    { passive: true }
  );

  overlay.addEventListener(
    "touchend",
    (e) => {
      if (!overlay.classList.contains("open")) return;
      if (touchStartY == null) return;

      const endY = e.changedTouches?.[0]?.clientY ?? null;
      if (endY == null) return;

      const dy = endY - touchStartY;
      touchStartY = null;

      // threshold to avoid accidental tiny swipes
      if (Math.abs(dy) < 40) return;

      if (dy < 0) goNext(); // swipe up
      else goPrev(); // swipe down
    },
    { passive: true }
  );


  // ===========================
  // FILTER LOGIC (multi-select)
  // ===========================
  const filterButtons = Array.from(
    document.querySelectorAll(".filter-btn[data-filter]")
  );
  const clearBtn = document.getElementById("filterClear");
  const hint = document.getElementById("filterHint");
  const items = Array.from(document.querySelectorAll(".gallery-item"));

  const active = new Set();

  function getItemTags(el) {
    const raw = (el.getAttribute("data-tags") || "").toLowerCase().trim();
    if (!raw) return [];
    return raw.split(",").map(s => s.trim()).filter(Boolean);
  }

  function applyFilters() {
    if (active.size === 0) {
      items.forEach(it => it.classList.remove("is-hidden"));
      if (hint) hint.textContent = "Click multiple tags to filter.";
      return;
    }

    items.forEach(it => {
      const tags = getItemTags(it);
      const match = tags.some(t => active.has(t));
      it.classList.toggle("is-hidden", !match);
    });

    if (hint) hint.textContent = `Showing: ${Array.from(active).join(", ")}`;
  }

  function toggleButton(btn) {
    const key = (btn.getAttribute("data-filter") || "").toLowerCase();
    if (!key) return;

    if (active.has(key)) {
      active.delete(key);
      btn.classList.remove("is-active");
      btn.setAttribute("aria-pressed", "false");
    } else {
      active.add(key);
      btn.classList.add("is-active");
      btn.setAttribute("aria-pressed", "true");
    }

    applyFilters();
  }

  filterButtons.forEach(btn => {
    btn.setAttribute("aria-pressed", "false");
    btn.addEventListener("click", () => toggleButton(btn));
  });

  clearBtn?.addEventListener("click", () => {
    active.clear();
    filterButtons.forEach(b => {
      b.classList.remove("is-active");
      b.setAttribute("aria-pressed", "false");
    });
    applyFilters();
  });

  applyFilters();
})();
</script>




</body>
</html>


